import PropTypes from 'prop-types';
import Head from 'next/head';

import Icon from 'public/vercel.svg';

// import axios from 'axios';
import { withLayout } from 'components/layout/Layout';
import { navigation } from 'data/data';
import { getLocalNavData } from 'helpers/localize';
import Section from '../components/reusable/Section';
import Container from '../components/reusable/Container';

// const API_KEY = process.env.API_KEY;
// const BASE_URL = `https://${API_KEY}.mockapi.io/api/`;

// const getEndpoint = (endpoint = '') => BASE_URL + endpoint;

const Home = ({ todos }) => {
  return (
    <Section>
      <Container>
        <Head>
          <title>Create Next App</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>

        <Icon width={100} fill={'#dddddd'} />
        <ul>
          {todos &&
            todos.map(({ id, createdAt, todo }) => (
              <li key={id}>
                <p>{new Date(createdAt).toUTCString()}</p>
                <p>{todo}</p>
              </li>
            ))}
        </ul>
      </Container>
    </Section>
  );
};

export default withLayout(Home);

export const getStaticProps = async ({
  params,
  locale,
  locales,
  defaultLocale,
}) => {
  console.log(params, locale, locales, defaultLocale);

  const navData = getLocalNavData(navigation, locale);

  try {
    // const { data: todos } = await axios.get(getEndpoint('todos'));
    const todos = [
      {
        createdAt: '2022-09-06T03:50:23.097Z',
        todo: 'Rerum ut aut alias a.',
        done: false,
        id: '1',
      },
      {
        createdAt: '2022-09-06T02:34:11.291Z',
        todo: 'Qui aliquid suscipit dolore laboriosam nulla et.',
        done: false,
        id: '2',
      },
      {
        createdAt: '2022-09-06T06:48:24.841Z',
        todo: 'Suscipit maxime nostrum saepe totam dolor et.',
        done: false,
        id: '3',
      },
      {
        createdAt: '2022-09-05T20:15:26.832Z',
        todo: 'Esse dolores non et rem.',
        done: false,
        id: '4',
      },
      {
        createdAt: '2022-09-05T17:46:14.531Z',
        todo: 'Architecto dicta fuga neque.',
        done: false,
        id: '5',
      },
      {
        createdAt: '2022-09-05T10:26:13.714Z',
        todo: 'Quod nisi ea nisi soluta quos rerum rem quasi.',
        done: false,
        id: '6',
      },
      {
        createdAt: '2022-09-06T02:42:41.807Z',
        todo: 'Quia et voluptatem velit molestiae corrupti odit doloribus eaque.',
        done: false,
        id: '7',
      },
      {
        createdAt: '2022-09-05T18:58:35.968Z',
        todo: 'Sunt ipsum repellat voluptatem esse ut eveniet enim.',
        done: false,
        id: '8',
      },
    ];
    return {
      props: {
        todos,
        navData,
      },
    };
  } catch (error) {
    return {
      notFound: true,
    };
  }
};

Home.propTypes = {
  todos: PropTypes.arrayOf(
    PropTypes.shape({
      id: PropTypes.string,
      createdAt: PropTypes.string,
      todo: PropTypes.string,
      done: PropTypes.bool.isRequired,
    }),
  ),
  navData: PropTypes.arrayOf(
    PropTypes.shape({
      slug: PropTypes.string.isRequired,
      name: PropTypes.string.isRequired,
      id: PropTypes.string.isRequired,
    }),
  ).isRequired,
};
